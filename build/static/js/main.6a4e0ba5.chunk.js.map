{"version":3,"sources":["models/global.js","static/logo.png","router/config.js","pages/index/index.jsx","router/privateRoute.js","router/router.js","index.js"],"names":["__webpack_require__","r","__webpack_exports__","namespace","state","user","reducers","effects","subscriptions","module","exports","p","routes","name","path","component","e","then","bind","models","Promise","all","resolve","privateRoutes","icon","privateRoutesAll","Header","Sider","Content","Home","collapsed","toggle","_this","setState","signOut","history","props","fetch","method","body","JSON","stringify","account","headers","Accept","Content-Type","res","json","data","code","push","catch","err","isFullPath","map","item","indexOf","location","pathname","_this2","this","replace","_this$props","children","listDom","react_default","a","createElement","className","onClick","layout_default","trigger","collapsible","theme","src","require","alt","menu_default","mode","defaultSelectedKeys","concat","Item","key","router","to","icon_default","type","popover_default","placement","title","content","badge_default","count","avatar_default","style","marginLeft","user_name","Component","withRouter","PrivateRoute","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","isAuthenticated","status","message_default","error","message","_this3","rest","objectWithoutProperties","assign","render","app","_ref","_ref2","index","dynamics","exact","dynamic","objectSpread","_ref3","privateRoute","dva","createHistory","model","global","locale_provider_default","locale","zh_CN","src_pages_index","src_router_router","start"],"mappings":"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","file":"static/js/main.6a4e0ba5.chunk.js","sourcesContent":["export default {\n    namespace: 'global',\n\n    state: {\n        user:{}\n    },\n\n    reducers: {\n\n    },\n\n    effects: {\n\n    },\n\n    subscriptions: {\n\n    }\n\n};\n","module.exports = __webpack_public_path__ + \"static/media/logo.e7b639e8.png\";","const routes = [\n    {\n        name: '博客',\n        path:'/',\n        component:()=>import('pages/blog/index.jsx'),\n        models:()=>[import('pages/blog/model')]\n    },\n    {\n        name:'登录',\n        path:'/login',\n        component:()=>import('pages/login/index.jsx'),\n        models:()=>[import('pages/login/model')]\n    },\n    {\n        name: '注册',\n        path:'/register',\n        component:()=>import('pages/register/index.jsx'),\n        models:()=>[import('models/global')]\n    }\n];\nconst privateRoutes = [\n    {\n        name: 'API管理',\n        icon: 'link',\n        path: '/apiManagement'\n    }\n];\nconst privateRoutesAll = [\n    {\n        name: 'API管理',\n        path: '/managementApi',\n        component: () => import('pages/apiManagement/index.jsx'),\n        models: () => [import('pages/apiManagement/model')]\n       \n    },\n    {\n        name: 'API管理详情',\n        path: '/managementApi/details',\n        component: () => import('pages/apiManagement/details.jsx'),\n        models: () => [import('pages/apiManagement/model')]\n       \n    },\n];\n\n\nexport {\n    routes,\n    privateRoutes,\n    privateRoutesAll\n}","import React, { Component } from 'react';\nimport {Layout, Menu, Icon, Avatar, Badge, Popover} from 'antd';\nimport {  Link, withRouter } from 'dva/router';\nimport {privateRoutes,routes} from 'router/config';\nimport './index.less';\nconst { Header, Sider, Content } = Layout;\nclass Home extends Component {\n    state = {\n        collapsed: false,\n        user:{}\n    };\n\n    componentDidMount(){\n        const { history } = this.props;\n        fetch('/api/checkUser',{\n            method:'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res)=>res.json()).then((data)=>{\n            if(data&&data.data){\n                this.setState({\n                    user:data.data\n                });\n            }else{\n                history.replace(\"/\");\n            }\n        }).catch((err)=>{\n            return err\n        });\n    }\n\n    toggle = () => {\n        this.setState({\n            collapsed: !this.state.collapsed,\n        });\n    };\n\n    signOut = () =>{\n        const {history} = this.props;\n        fetch('/api/logout',{\n            method:'POST',\n            body:JSON.stringify({account:this.state.user.account}),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res)=>res.json()).then((data)=>{\n           if(data&&data.code === 200){\n               history.push(\"/login\");\n           }\n        }).catch((err)=>{\n            return err\n        });\n\n    };\n\n    isFullPath = () => {\n        const {history} = this.props;\n        const routeArray = routes.map((item)=> {\n            return item.path;\n        })\n        return routeArray.indexOf(history.location.pathname) !== -1;\n    };\n    render() {\n        const { children,location } = this.props;\n        const listDom = (<ul className='info'>\n            <li>未读消息</li>\n            <li>个人信息</li>\n            <li onClick={this.signOut}>退出登陆</li>\n        </ul>);\n        if (this.isFullPath()) {\n            return children;\n        }\n        return (\n            <Layout className=\"container\">\n                <Sider\n                    trigger={null}\n                    collapsible\n                    theme='light'\n                    collapsed={this.state.collapsed}\n                >\n                    <div className=\"logo\" >\n                        <img src={require('../../static/logo.png')} alt='千羚'/>\n                    </div>\n                    <Menu theme=\"light\" mode=\"inline\" defaultSelectedKeys={[`${location.pathname}`]}>\n                        {privateRoutes.map((item)=>{\n                            return (\n                                <Menu.Item key={item.path}>\n                                    <Link to={item.path}>\n                                        <Icon type={item.icon} />\n                                        <span>{item.name}</span>\n                                    </Link>\n                                </Menu.Item>\n                            )\n                        })}\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Header className=\"header\">\n                        <Icon\n                            className=\"trigger\"\n                            type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\n                            onClick={this.toggle}\n                        />\n                        <div className='user'>\n                            <Popover placement=\"bottomRight\" title={<div className='title'>账户信息</div>} content={listDom} trigger=\"click\">\n                                <Badge count={1}><Avatar icon=\"user\" /></Badge>\n                            </Popover>\n                            <span style={{marginLeft:'20px'}}>{this.state.user.user_name}</span>\n                        </div>\n                    </Header>\n                    <Content className=\"content\">\n                        {children}\n                    </Content>\n                </Layout>\n            </Layout>\n        );\n    }\n}\n\nexport default withRouter(Home);\n","import React, {Component} from 'react';\nimport {Route, withRouter} from 'dva/router';\nimport { message } from \"antd\";\nclass PrivateRoute extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            isAuthenticated: false\n        };\n    };\n    componentDidMount(){\n        const {history} = this.props;\n        fetch('/api/checkUser',{\n            method:'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res)=>res.json()).then((data)=>{\n            if(data&&data.status)  {\n                this.setState({\n                    isAuthenticated:data.status\n                });\n            }else{\n                this.setState({\n                    isAuthenticated:true\n                });\n                history.replace(\"/login\");\n                message.error(data.message, 2.5);\n            }\n        }).catch((err)=>{\n            return err\n        });\n    };\n    render(){\n        let { component: Component, ...rest} = this.props;\n        return (\n            <div>\n                {\n                    this.state.isAuthenticated\n                        ? (<Route {...rest} render={(props) => ( <Component app={this.props.app} {...props} /> )}/> )\n                        : ''\n                }\n            </div>\n        )\n\n    };\n}\nexport default withRouter(PrivateRoute);\n","import React from 'react';\nimport { Router, Route, Switch } from 'dva/router';\nimport dynamic from 'dva/dynamic';\nimport PrivateRoute from './privateRoute';\nimport {privateRoutesAll,routes} from './config';\nfunction router({ history, app }) {\n    return (\n        <Router history={history}>\n            <Switch>\n                {\n                    routes.map(({path,...dynamics},index)=>(\n                        <Route\n                            key={index}\n                            path={path}\n                            exact\n                            component={dynamic({\n                                app,\n                                ...dynamics\n                            })}\n                        />\n                    ))\n                }\n                {\n                    privateRoutesAll.map(({path,...dynamics},index)=>(\n                        <PrivateRoute\n                            key={index}\n                            path={path}\n                            exact\n                            app={app}\n                            component={dynamic({\n                                app,\n                                ...dynamics\n                            })}\n                        />\n                    ))\n                }\n            </Switch>\n        </Router>\n    );\n}\n\nexport default router;\n","import React from 'react';\nimport dva from 'dva';\nimport global from './models/global';\nimport Home from './pages/index/index';\nimport DvaRouter from './router/router';\nimport { Router } from 'dva/router';\nimport './index.css';\nimport {LocaleProvider} from 'antd';\nimport createHistory from 'history/createBrowserHistory'\nimport zh_CN from 'antd/lib/locale-provider/zh_CN';\n// 1. Initialize\nconst app = dva({\n    history:createHistory()\n});\n\n// 2. Plugins\n// app.use({});\n// 3. Model\napp.model(global);\n// 4. Router\napp.router((props)=>{\n    return(\n        <LocaleProvider locale={zh_CN}>\n            <Router history={props.history}>\n                    <Home history={props.history}>\n                        <DvaRouter {...props}/>\n                    </Home>\n            </Router>\n        </LocaleProvider>\n    )\n});\n\n\n// 5. Start\napp.start('#root');\n"],"sourceRoot":""}