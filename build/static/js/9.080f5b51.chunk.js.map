{"version":3,"sources":["common/js/axios.js","pages/login/model.js"],"names":["request","url","method","params","config","options","Object","_Users_chiove_web_react_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","headers","content-type","data","axios","then","catch","err","__webpack_exports__","namespace","state","subscriptions","effects","submit","_Users_chiove_web_react_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_ref","_ref2","payload","call","put","hide","form","wrap","_context","prev","next","select","antd_lib_message__WEBPACK_IMPORTED_MODULE_2___default","loading","formData","sent","t0","code","success","routerRedux","push","abrupt","error","stop","reducers"],"mappings":"wHA8BeA,IA7BC,SAACC,EAAIC,EAAOC,EAAOC,GAC/B,IAAIC,EAAU,GAmBd,GAjBIA,EADDD,EACQE,OAAAC,EAAA,EAAAD,CAAA,CACHL,IAAIA,EACJC,OAAOA,GACJE,GAGG,CACNH,IAAIA,EACJC,OAAOA,EACPM,QAAQ,CACJC,eAAe,qBAIxBN,IACU,QAATD,EAAiBG,EAAQF,OAASA,EAAUE,EAAQK,KAAOP,GAE5DF,GAAKC,EACJ,OAAOS,IAAMN,GAASO,KAAK,SAACF,GACxB,OAAOA,EAAKA,OACbG,MAAM,SAACC,GACN,OAAOA,gHCtBJC,EAAA,SACXC,UAAW,QAEXC,MAAO,GAIPC,cAAe,GAIfC,QAAS,CACHC,OADGC,EAAAC,EAAAC,KAAA,SAAAH,EAAAI,EAAAC,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAApB,EAAA,OAAAW,EAAAC,EAAAS,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIY,OAHPR,EADLF,EACKE,QAAWC,EADhBF,EACgBE,KAAMC,EADtBH,EACsBG,IADtBH,EAC2BU,OACtBN,EAAOO,EAAAd,EAAQe,QAAQ,8BAAW,GAClCP,EAAOJ,EAAQY,SAHpBN,EAAAE,KAAA,EAIkBP,EAAK,kBAAI3B,YAAQ,YAAY,OAAO8B,KAJtD,OAIKpB,EAJLsB,EAAAO,KAAAP,EAAAQ,GAKO9B,EAAK+B,KALZT,EAAAE,KAMQ,SANRF,EAAAQ,GAAA,GAWQ,SAXRR,EAAAQ,GAAA,GAcQ,SAdRR,EAAAQ,GAAA,oBASO,OAFAJ,EAAAd,EAAQoB,QAAQ,iCAAS,KACzBb,IARPG,EAAAE,KAAA,GASaN,EAAIe,cAAYC,KAAK,oBATlC,eAAAZ,EAAAa,OAAA,2BAYOT,EAAAd,EAAQwB,MAAM,uCAAU,KAZ/Bd,EAAAa,OAAA,2BAeOhB,IACAO,EAAAd,EAAQwB,MAAM,iCAAS,KAhB9Bd,EAAAa,OAAA,2BAmBOhB,IACAO,EAAAd,EAAQwB,MAAM,iCAAS,KApB9Bd,EAAAa,OAAA,qCAAAb,EAAAe,SAAA3B,MA0BT4B,SAAU","file":"static/js/9.080f5b51.chunk.js","sourcesContent":["import axios from 'axios';\nconst request = (url,method,params,config) =>{\n    let options = {};\n    if(config){\n        options = {\n            url:url,\n            method:method,\n            ...config\n        }\n    }else{\n        options = {\n            url:url,\n            method:method,\n            headers:{\n                \"content-type\":\"application/json\"\n            }\n        }\n    }\n    if(params){\n        method==='GET'?  options.params = params :  options.data = params;\n    }\n    if(url&&method){\n        return axios(options).then((data)=>{\n            return data.data\n        }).catch((err)=>{\n            return err\n        });\n    }\n};\n\nexport default request;","import { routerRedux } from 'dva/router'\nimport { message } from 'antd';\nimport request from 'common/js/axios'\nexport default {\n    namespace: 'login',\n\n    state: {\n\n    },\n\n    subscriptions: {\n\n    },\n\n    effects: {\n        * submit({payload}, {call, put, select}){\n            const hide = message.loading('正在登录...', 0);\n            const form = payload.formData;\n            const data = yield call(()=>request('api/login','POST',form));\n            switch (data.code) {    \n                case '0000':\n                    message.success('登录成功！', 2.5);\n                    hide();\n                    yield put(routerRedux.push('./managementApi'));\n                    break;\n                case '0001':\n                    message.error('账号不存在！', 2.5);\n                    break;\n                case '0002':\n                    hide();\n                    message.error('密码错误！', 2.5);\n                    break;\n                default:\n                    hide();\n                    message.error('网络错误！', 2.5);\n                    break;\n            }\n        }\n    },\n\n    reducers: {\n        \n    }\n};\n"],"sourceRoot":""}